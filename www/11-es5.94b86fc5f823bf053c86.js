!function(){function t(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function n(t,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function e(t,e,o){return e&&n(t.prototype,e),o&&n(t,o),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"3im5":function(n,o,i){"use strict";i.r(o),i.d(o,"AuthorizationsModule",(function(){return rt}));var r,s,a,c,u,b,l=i("ofXK"),f=i("tyNb"),p=i("AytR"),h=i("fXoL"),m=i("ryO2"),g=i("TEn/"),d=((a=function(){function n(e){t(this,n),this.userService=e}return e(n,[{key:"ngOnInit",value:function(){}},{key:"disconnect",value:function(){this.userService.has&&window.localStorage.removeItem(p.a.storage.student)}}]),n}()).\u0275fac=function(t){return new(t||a)(h.Hb(m.a))},a.\u0275cmp=h.Bb({type:a,selectors:[["sost-authorizations"]],decls:14,vars:0,consts:[["slat","bottom"],["tab","login"],["name","home"],["tab","signup"],["name","calendar"],["ngClick","disconnect()"],["name","log-out"]],template:function(t,n){1&t&&(h.Mb(0,"ion-tabs"),h.Mb(1,"ion-tab-bar",0),h.Mb(2,"ion-tab-button",1),h.Ib(3,"ion-icon",2),h.Mb(4,"ion-label"),h.hc(5,"Login"),h.Lb(),h.Lb(),h.Mb(6,"ion-tab-button",3),h.Ib(7,"ion-icon",4),h.Mb(8,"ion-label"),h.hc(9,"Register"),h.Lb(),h.Lb(),h.Mb(10,"ion-tab-button",5),h.Ib(11,"ion-icon",6),h.Mb(12,"ion-label"),h.hc(13,"Disconnect"),h.Lb(),h.Lb(),h.Lb(),h.Lb())},directives:[g.m,g.k,g.l,g.e,g.h],styles:[""]}),a),v=((s=function(){function n(){t(this,n)}return e(n,[{key:"ngOnInit",value:function(){}}]),n}()).\u0275fac=function(t){return new(t||s)},s.\u0275cmp=h.Bb({type:s,selectors:[["sost-toolbar"]],inputs:{title:"title"},decls:4,vars:1,template:function(t,n){1&t&&(h.Mb(0,"ion-header"),h.Mb(1,"ion-toolbar"),h.Mb(2,"ion-title"),h.hc(3),h.Lb(),h.Lb(),h.Lb()),2&t&&(h.xb(3),h.jc(" ",n.title," "))},directives:[g.d,g.p,g.o],styles:[""]}),s),L=((r=function(){function n(){t(this,n)}return e(n,[{key:"ngOnInit",value:function(){}}]),n}()).\u0275fac=function(t){return new(t||r)},r.\u0275cmp=h.Bb({type:r,selectors:[["sost-home"]],decls:10,vars:1,consts:[[3,"title"],["routerLink","/auth/login"],["routerLink","/auth/signup"],["routerLink","/contacts"]],template:function(t,n){1&t&&(h.Ib(0,"sost-toolbar",0),h.Mb(1,"ion-content"),h.Mb(2,"h1"),h.hc(3," CSS in global.scss "),h.Lb(),h.Mb(4,"ion-button",1),h.hc(5,"Login"),h.Lb(),h.Mb(6,"ion-button",2),h.hc(7,"Signup"),h.Lb(),h.Mb(8,"ion-button",3),h.hc(9,"Contacts"),h.Lb(),h.Lb()),2&t&&h.Zb("title","Home")},directives:[v,g.c,g.b,f.h,g.u],styles:[""]}),r),w=i("3Pt+"),y=((c=function(){function n(e){t(this,n),this.fb=e}return e(n,[{key:"formBuild",value:function(){return this.fb.group({email:["",[w.k.required,w.k.email]],password:["",[w.k.required,w.k.maxLength(15)]]})}}]),n}()).\u0275fac=function(t){return new(t||c)(h.Qb(w.a))},c.\u0275prov=h.Db({token:c,factory:c.\u0275fac,providedIn:"root"}),c),M=i("vkgz"),k=i("tk/3"),x=((b=function(){function n(){t(this,n)}return e(n,[{key:"getRegister",value:function(){return this.register}},{key:"setRegister",value:function(t){this.register=t}},{key:"getLogin",value:function(){return this.login}},{key:"setLogin",value:function(t){this.login=t}}]),n}()).\u0275fac=function(t){return new(t||b)},b.\u0275prov=h.Db({token:b,factory:b.\u0275fac,providedIn:"root"}),b),I=((u=function(){function n(e,o,i){t(this,n),this.http=e,this.userService=o,this.loaderService=i}return e(n,[{key:"register",value:function(t){var n=this;return this.http.post(p.a.api.signup,{username:t.get("username").value,email:t.get("email").value,password:t.get("password").value}).pipe(Object(M.a)((function(){n.loaderService.setRegister(!1)})))}},{key:"login",value:function(t){var n=this;return this.http.post(p.a.api.login,{email:t.get("email").value,password:t.get("password").value}).pipe(Object(M.a)((function(t){n.userService.setActive(t),n.loaderService.setLogin(!1)})))}}]),n}()).\u0275fac=function(t){return new(t||u)(h.Qb(k.b),h.Qb(m.a),h.Qb(x))},u.\u0275prov=h.Db({token:u,factory:u.\u0275fac,providedIn:"any"}),u);function S(t,n){1&t&&(h.Mb(0,"span"),h.hc(1,"Credentials not found"),h.Lb())}function C(t,n){1&t&&(h.Mb(0,"span"),h.hc(1,"An error occured"),h.Lb())}function Z(t,n){if(1&t&&(h.Mb(0,"ion-item"),h.Mb(1,"ion-text",7),h.Kb(2,8),h.fc(3,S,2,0,"span",9),h.fc(4,C,2,0,"span",10),h.Jb(),h.Lb(),h.Lb()),2&t){var e=h.Wb();h.xb(2),h.Zb("ngSwitch",e.error.status),h.xb(1),h.Zb("ngSwitchCase",404)}}function E(t,n){1&t&&(h.Mb(0,"ion-text"),h.hc(1," Doit contenir un E-mail. "),h.Lb())}function F(t,n){1&t&&(h.Mb(0,"ion-text",7),h.hc(1," Le mot de passe saisit est trop court "),h.Lb())}function H(t,n){1&t&&(h.Mb(0,"ion-text"),h.hc(1," Le mot de passe saisit est trop long "),h.Lb())}function P(t,n){if(1&t&&(h.Mb(0,"div"),h.Mb(1,"ion-button",11),h.hc(2,"Submit"),h.Lb(),h.Lb()),2&t){var e=h.Wb();h.xb(1),h.Zb("disabled",!e.loginForm.valid)}}function j(t,n){1&t&&(h.Mb(0,"div"),h.Ib(1,"ion-spinner",12),h.Lb())}var O,D,N,R=((N=function(){function n(e,o,i,r){t(this,n),this.loginService=e,this.httpService=o,this.router=i,this.loaderService=r}return e(n,[{key:"ngOnInit",value:function(){this.loginForm=this.loginService.formBuild(),alert(p.a.production)}},{key:"enter",value:function(){console.log("ENTER")}},{key:"login",value:function(){var t=this;this.error=null,this.httpService.login(this.loginForm).subscribe((function(t){console.log("In login.component !")}),(function(n){t.error=n}))}}]),n}()).\u0275fac=function(t){return new(t||N)(h.Hb(y),h.Hb(I),h.Hb(f.g),h.Hb(x))},N.\u0275cmp=h.Bb({type:N,selectors:[["sost-login"]],decls:20,vars:7,consts:[[1,"ion-padding"],[3,"formGroup","ngSubmit"],[4,"ngIf"],["type","email","formControlName","email"],["type","password","formControlName","password"],["color","danger",4,"ngIf"],["routerLink","/auth/home"],["color","danger"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["type","submit","color","primary",3,"disabled"],["name","crescent"]],template:function(t,n){1&t&&(h.Mb(0,"ion-content",0),h.Mb(1,"h1"),h.hc(2,"Main Content"),h.Lb(),h.Mb(3,"form",1),h.Ub("ngSubmit",(function(){return n.login()})),h.fc(4,Z,5,2,"ion-item",2),h.Mb(5,"ion-item"),h.Mb(6,"ion-label"),h.hc(7,"E-mail"),h.Lb(),h.Ib(8,"ion-input",3),h.Lb(),h.fc(9,E,2,0,"ion-text",2),h.Mb(10,"ion-item"),h.Mb(11,"ion-label"),h.hc(12,"Password"),h.Lb(),h.Ib(13,"ion-input",4),h.Lb(),h.fc(14,F,2,0,"ion-text",5),h.fc(15,H,2,0,"ion-text",2),h.fc(16,P,3,1,"div",2),h.fc(17,j,2,0,"div",2),h.Lb(),h.Mb(18,"ion-button",6),h.hc(19,"Home"),h.Lb(),h.Lb()),2&t&&(h.xb(3),h.Zb("formGroup",n.loginForm),h.xb(1),h.Zb("ngIf",null!=n.error),h.xb(5),h.Zb("ngIf",n.loginForm.controls.email.hasError("email")),h.xb(5),h.Zb("ngIf",n.loginForm.controls.password.hasError("minlength")),h.xb(1),h.Zb("ngIf",n.loginForm.controls.password.hasError("maxlength")),h.xb(1),h.Zb("ngIf",!n.loaderService.getLogin()),h.xb(1),h.Zb("ngIf",n.loaderService.getLogin()))},directives:[g.c,w.l,w.i,w.c,l.i,g.g,g.h,g.f,g.v,w.h,w.b,g.b,f.h,g.u,g.n,l.j,l.k,l.l,g.j],styles:[""]}),N),B=((D=function(){function n(){t(this,n)}return e(n,[{key:"validate",value:function(t){return t.dirty?(this.subscription||(this.subscription=t.root.get("password").valueChanges.subscribe((function(){return t.updateValueAndValidity()}))),console.log("Password : "+t.root.get("password").value),console.log("Password2 : "+t.value),t.root.get("password").value!==t.value?{confirm:!0}:null):(this.subscription&&(this.subscription.unsubscribe(),this.subscription=null),null)}}]),n}()).\u0275fac=function(t){return new(t||D)},D.\u0275dir=h.Cb({type:D,selectors:[["","sostRepeatedPassword",""]],features:[h.wb([{provide:w.e,useExisting:D,multi:!0}])]}),D.\u0275prov=h.Db({token:D,factory:D.\u0275fac,providedIn:"root"}),D),Q=((O=function(){function n(e,o){t(this,n),this.fb=e,this.repeatedPasswordValidator=o}return e(n,[{key:"formBuild",value:function(){return this.fb.group({email:["",[w.k.required,w.k.email]],username:["",[w.k.required,w.k.maxLength(15)]],password:["",[w.k.required,w.k.maxLength(20)]],passwordConf:["",[this.repeatedPasswordValidator]]})}}]),n}()).\u0275fac=function(t){return new(t||O)(h.Qb(w.a),h.Qb(B))},O.\u0275prov=h.Db({token:O,factory:O.\u0275fac,providedIn:"root"}),O);function q(t,n){if(1&t&&(h.Mb(0,"ion-item"),h.Mb(1,"ion-text",9),h.hc(2),h.Lb(),h.Lb()),2&t){var e=h.Wb();h.xb(2),h.ic(e.error)}}function A(t,n){1&t&&(h.Mb(0,"ion-text"),h.hc(1," Doit contenir un E-mail. "),h.Lb())}function W(t,n){1&t&&(h.Mb(0,"ion-text"),h.hc(1," Le nom d'utilisateur saisie est trop court "),h.Lb())}function z(t,n){1&t&&(h.Mb(0,"ion-text"),h.hc(1," Le nom d'utilisateur saisie est trop long "),h.Lb())}function G(t,n){1&t&&(h.Mb(0,"ion-text"),h.hc(1," Le mot de passe saisit est trop court "),h.Lb())}function J(t,n){1&t&&(h.Mb(0,"ion-text"),h.hc(1," Le mot de passe saisit est trop long "),h.Lb())}function T(t,n){1&t&&(h.Mb(0,"ion-text",9),h.hc(1," Passwords mismatch ! "),h.Lb())}function U(t,n){if(1&t&&(h.Mb(0,"div"),h.Mb(1,"ion-button",10),h.hc(2,"Submit"),h.Lb(),h.Lb()),2&t){var e=h.Wb();h.xb(1),h.Zb("disabled",!e.signupForm.valid)}}function V(t,n){1&t&&(h.Mb(0,"div"),h.Ib(1,"ion-spinner",11),h.Lb())}var K,X,Y,$,_=[{path:"",component:d,children:[{path:"login",component:R},{path:"signup",component:(K=function(){function n(e,o,i,r){t(this,n),this.formService=e,this.httpService=o,this.router=i,this.loaderService=r}return e(n,[{key:"ngOnInit",value:function(){this.signupForm=this.formService.formBuild()}},{key:"register",value:function(){var t=this;this.error=null,this.httpService.register(this.signupForm).subscribe((function(){t.router.navigate(["/auth","login"])}),(function(n){t.error=n}))}}]),n}(),K.\u0275fac=function(t){return new(t||K)(h.Hb(Q),h.Hb(I),h.Hb(f.g),h.Hb(x))},K.\u0275cmp=h.Bb({type:K,selectors:[["sost-signup"]],decls:29,vars:9,consts:[[1,"ion-padding"],[3,"formGroup","ngSubmit"],[4,"ngIf"],["type","email","formControlName","email"],["formControlName","username"],["type","password","formControlName","password"],["type","password","formControlName","passwordConf"],["color","danger",4,"ngIf"],["routerLink","/auth/home"],["color","danger"],["type","submit","color","primary",3,"disabled"],["name","crescent"]],template:function(t,n){1&t&&(h.Mb(0,"ion-content",0),h.Mb(1,"form",1),h.Ub("ngSubmit",(function(){return n.register()})),h.fc(2,q,3,1,"ion-item",2),h.Mb(3,"ion-item"),h.Mb(4,"ion-label"),h.hc(5,"E-mail"),h.Lb(),h.Ib(6,"ion-input",3),h.fc(7,A,2,0,"ion-text",2),h.Lb(),h.Mb(8,"ion-item"),h.Mb(9,"ion-label"),h.hc(10,"Username"),h.Lb(),h.Ib(11,"ion-input",4),h.fc(12,W,2,0,"ion-text",2),h.fc(13,z,2,0,"ion-text",2),h.Lb(),h.Mb(14,"ion-item"),h.Mb(15,"ion-label"),h.hc(16,"Password"),h.Lb(),h.Ib(17,"ion-input",5),h.fc(18,G,2,0,"ion-text",2),h.fc(19,J,2,0,"ion-text",2),h.Lb(),h.Mb(20,"ion-item"),h.Mb(21,"ion-label"),h.hc(22,"Password confirm"),h.Lb(),h.Ib(23,"ion-input",6),h.fc(24,T,2,0,"ion-text",7),h.Lb(),h.fc(25,U,3,1,"div",2),h.fc(26,V,2,0,"div",2),h.Lb(),h.Mb(27,"ion-button",8),h.hc(28,"Home"),h.Lb(),h.Lb()),2&t&&(h.xb(1),h.Zb("formGroup",n.signupForm),h.xb(1),h.Zb("ngIf",!!n.error),h.xb(5),h.Zb("ngIf",n.signupForm.controls.email.hasError("email")),h.xb(5),h.Zb("ngIf",n.signupForm.controls.username.hasError("minlength")),h.xb(1),h.Zb("ngIf",n.signupForm.controls.username.hasError("maxlength")),h.xb(5),h.Zb("ngIf",n.signupForm.controls.password.hasError("minlength")),h.xb(1),h.Zb("ngIf",n.signupForm.controls.password.hasError("maxlength")),h.xb(6),h.Zb("ngIf",!n.loaderService.getRegister()),h.xb(1),h.Zb("ngIf",n.loaderService.getRegister()))},directives:[g.c,w.l,w.i,w.c,l.i,g.g,g.h,g.f,g.v,w.h,w.b,g.b,f.h,g.u,g.n,g.j],styles:[""]}),K)},{path:"home",component:L},{path:"**",redirectTo:"home"}]}],tt=((X=function n(){t(this,n)}).\u0275mod=h.Fb({type:X}),X.\u0275inj=h.Eb({factory:function(t){return new(t||X)},imports:[[f.i.forChild(_)],f.i]}),X),nt=i("PCNd"),et=i("JIr8"),ot=i("nYR2"),it=(($=function(){function n(e){t(this,n),this.loaderService=e}return e(n,[{key:"intercept",value:function(t,n){var e=this;console.log("Intercepted ! (authorizationsHttpInterceptor)");var o=null;if(p.a.api.login==t.url)o="login";else{if(!p.a.api.signup)return n.handle(t);o="register"}return this.loaderService[o]=!0,n.handle(t).pipe(Object(et.a)((function(t){var n="Network problem";throw 404===t.status?n="Invalid credentials":400===t.status?n=t.error.error:500===t.status&&(n="Unavailable Webservice"),n})),Object(ot.a)((function(){e.loaderService[o]=!1})))}}]),n}()).\u0275fac=function(t){return new(t||$)(h.Qb(x))},$.\u0275prov=h.Db({token:$,factory:$.\u0275fac,providedIn:"root"}),$),rt=((Y=function n(){t(this,n)}).\u0275mod=h.Fb({type:Y}),Y.\u0275inj=h.Eb({factory:function(t){return new(t||Y)},providers:[{provide:k.a,useClass:it,multi:!0}],imports:[[l.b,tt,nt.a]]}),Y)}}])}();